<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Widget Demo - Spatial CAPTCHA</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #333;
    }

    .demo-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .demo-header {
      text-align: center;
      color: white;
      margin-bottom: 3rem;
    }

    .demo-header h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .demo-header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .demo-content {
      background: white;
      border-radius: 1.5rem;
      padding: 3rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .demo-section {
      margin-bottom: 3rem;
    }

    .demo-section h2 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #2196f3;
    }

    .widget-container {
      margin: 2rem 0;
    }

    .result-display {
      margin-top: 2rem;
      padding: 1.5rem;
      background: #f5f5f5;
      border-radius: 0.5rem;
      border-left: 4px solid #2196f3;
    }

    .result-display h3 {
      margin-bottom: 0.5rem;
      color: #333;
    }

    .result-display pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      font-size: 0.9rem;
    }

    .nav-links {
      text-align: center;
      margin-top: 2rem;
    }

    .nav-links a {
      display: inline-block;
      margin: 0 1rem;
      padding: 0.75rem 1.5rem;
      background: #2196f3;
      color: white;
      text-decoration: none;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }

    .nav-links a:hover {
      background: #1976d2;
      transform: translateY(-2px);
    }

    .info-box {
      background: #e3f2fd;
      padding: 1.5rem;
      border-radius: 0.5rem;
      margin-bottom: 2rem;
    }

    .info-box strong {
      color: #1976d2;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <h1>Spatial CAPTCHA Widget Demo</h1>
      <p>See the embeddable widget in action</p>
    </div>

    <div class="demo-content">
      <div class="info-box">
        <strong>Demo Mode:</strong> This demo uses a test API key. To use in production, sign in to get your own API key.
      </div>

      <div class="demo-section">
        <h2>Live Widget</h2>
        <p>Rotate the 3D object and click verify to test the CAPTCHA:</p>

        <div class="widget-container">
          <div id="spatial-captcha"></div>
        </div>

        <div class="result-display">
          <h3>Verification Result:</h3>
          <pre id="result-output">Waiting for verification...</pre>
        </div>
      </div>

      <div class="demo-section">
        <h2>How It Works</h2>
        <ol style="line-height: 2;">
          <li>User rotates the 3D object using mouse or touch</li>
          <li>When ready, user clicks "Verify"</li>
          <li>System compares user rotation with target rotation</li>
          <li>If within 35 degrees, verification succeeds</li>
          <li>Session token is returned for backend validation</li>
        </ol>
      </div>

      <div class="nav-links">
        <a href="app.html">Dashboard</a>
        <a href="index.html">Original CAPTCHA</a>
      </div>
    </div>
  </div>

  <script src="widget.js"></script>
  <script>
    SpatialCaptcha.init({
      apiKey: 'demo_key_for_testing',
      container: '#spatial-captcha',
      onSuccess: function(token) {
        document.getElementById('result-output').textContent = JSON.stringify({
          status: 'SUCCESS',
          message: 'User verified as human',
          session_token: token,
          timestamp: new Date().toISOString()
        }, null, 2);
        console.log('CAPTCHA Success:', token);
      },
      onError: function(error) {
        document.getElementById('result-output').textContent = JSON.stringify({
          status: 'ERROR',
          message: error.message || 'Verification failed',
          timestamp: new Date().toISOString()
        }, null, 2);
        console.error('CAPTCHA Error:', error);
      }
    });
  </script>
</body>
</html>
